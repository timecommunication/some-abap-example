#### 多线程程序

创建线程：

```abap
CALL FUNCTION 'ZF_MARA_RFC_H10009'
    STARTING NEW TASK GV_TASK_ID
    PERFORMING COLLECT_LT_MARA ON END OF TASK

   EXPORTING
     IV_OFFSET       = GV_OFFSET
     IV_UPTO         = C_BATCH_ROWS
   TABLES
     T_MARA          = GT_MARA_TMP .
```



设置线程回调函数：

```ABAP
FORM COLLECT_LT_MARA  USING TASKNAME.

  DATA LT_MARA TYPE TABLE OF ZROW_MARA_H10009.

  RECEIVE RESULTS FROM FUNCTION 'ZF_MARA_RFC_H10009'
    TABLES
      T_MARA = LT_MARA.

  APPEND LINES OF LT_MARA TO GT_MARA.

  GV_END += 1.

ENDFORM.
```

